<link rel="import" href="../../bower_components/polymer/polymer-element.html">
<link rel="import" href="../../bower_components/app-layout/app-layout.html">
<link rel="import" href="../../bower_components/paper-input/paper-input.html">
<link rel="import" href="../../bower_components/paper-slider/paper-slider.html">
<link rel="import" href="../../bower_components/paper-button/paper-button.html">
<link rel="import" href="../../bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import" href="../../bower_components/iron-image/iron-image.html">
<link rel="import" href="../../bower_components/paper-toggle-button/paper-toggle-button.html">
<link rel="import" href="../../bower_components/paper-card/paper-card.html">

<dom-module id="bonus-app">
  <template>
    <style>
      :host {
        display: block;
        font-family: Roboto, Noto, sans-serif;
      }

      app-toolbar {
        background-color: var(--paper-grey-600);
        color: white;
        margin: 20px 0;
      }

      paper-slider.red {
        --paper-slider-knob-color: var(--paper-red-900);
        --paper-slider-active-color: var(--paper-red-500);
        width: 100%;
        --paper-slider-input: {
          width: 60px
        }
        ;
      }

      paper-button.reset {
        background: var(--paper-grey-600);
        color: white;
        width: 100%;
      }

      paper-button.reset:hover {
        background: var(--paper-blue-900);
      }

      #salary-container {
        max-width: 700px;
        width: 90%;
        margin: 0 auto;
      }

      #sizing-logo {
        width: 350px;
        height: 150px;
        left: 430px;
      }
    </style>

    <div id="salary-container">
      <iron-image id="sizing-logo" sizing="contain" src="/src/image/geos_logo.png"></iron-image>

      <paper-button disabled class="reset">
        <iron-icon icon="check"></iron-icon>
        <b>BEREKEN JE SALARIS BIJ DPA GEOS</b>
      </paper-button>

      <paper-input value="{{clientHourlyRate}}" always-float-label label="Verwacht uurtarief bij klant" auto-validate pattern="[0-9]*"
        error-message="Alleen getallen!" type="string" maxlength="3">
        <div slot="prefix">€</div>
      </paper-input>
      </br>
      </br>
      <div>Basissalaris DPA GEOS</div>
      </br>
      <paper-slider class="red" value='{{selectedBasicSalary}}' min='1500' max='5000' snaps max-markers="35" step="100" dir="rtl"
        editable>
      </paper-slider>
      </br>
      <div>Aantal uren per week</div>
      </br>
      <paper-slider class="red" value='{{selectedHours}}' min='32' max='40' snaps max-markers="8" dir="rtl" editable></paper-slider>
      </br>
      <div>Aantal vakantiedagen</div>
      </br>
      <paper-slider class="red" value='{{selectedHolidayDays}}' min='25' max='35' snaps max-markers="10" dir="rtl" editable></paper-slider>
      </br>
      <paper-input label="Bonus" readonly value="[[bonus]]">
        <div slot="prefix">€</div>
      </paper-input>

      </br>
      <!-- <paper-card> -->
        <paper-toggle-button>Lease auto</paper-toggle-button>
      <!-- </paper-card> -->
      </br>

      <paper-input label="Total bruto salaris" readonly value="[[grossSalary]]">
        <div slot="prefix">€</div>
      </paper-input>
      </br>
      <paper-button class="reset" on-click="_reset" role="button">
        <iron-icon icon="check"></iron-icon>
        <b>RESET</b>
      </paper-button>
      </br>
    </div>
  </template>

  <script>
    /**
     * @customElement
     * @polymer
     */
    class bonusApp extends Polymer.Element {

      static get is() {
        return 'bonus-app';
      }

      static get properties() {
        return {
          clientHourlyRate: {
            type: String
          },
          selectedBasicSalary: {
            type: Number,
            value: 2500,
            observer: 'getInternalRate'
          },
          selectedHours: {
            type: Number,
            value: 36
          },
          selectedHolidayDays: {
            type: Number,
            value: 30
          },
          InternalRate: {
            type: Number,
            computed: 'getInternalRate(selectedBasicSalary)'
          },
          bonus: {
            type: Number,
            computed: 'getbonus(clientHourlyRate, InternalRate, selectedHours)'
          },
          grossSalary: {
            type: Number,
            computed: 'getGrossSalary(bonus, selectedBasicSalary)'
          },
        }
      }

      getInternalRate(selectedBasicSalary) {
        let res_InternalRate;
        let basisSalaris = [2000, 2100, 2200, 2300, 2400, 2500, 2600, 2700, 2800, 2900, 3000, 3100, 3200, 3300,
          3400, 3500, 3600, 3700, 3800, 3900, 4000, 4100, 4200, 4300, 4400, 4500, 4600, 4700, 4800, 4900, 5000,
          5100, 5200, 5300, 5400, 5500, 5600, 5700, 5800, 5900, 6000
        ];
        let tarief = [46, 47.5, 49, 50.5, 52, 53, 54.5, 56, 57.5, 59, 60, 61, 62.5, 64, 65.5, 67, 68, 69.5,
          71, 72.5, 74, 75, 76.5, 78, 79.5, 81, 82.5, 84, 90, 91.5, 93, 94.5, 96, 97.5, 99, 100.5, 102,
          103.5, 105, 106.5, 108
        ];

        for (var i = 0; i < basisSalaris.length; i++) {
          if (selectedBasicSalary == basisSalaris[i]) {
            res_InternalRate = tarief[i];
          }
        }
        return res_InternalRate;
      }

      getbonus(clientHourlyRate, InternalRate, selectedHours) {
        const res_bonus = ((clientHourlyRate - InternalRate) * 0.7) * selectedHours;
        if (res_bonus >= 0) {
          return res_bonus;
        } else {
          return 0;
        }
      }

      getGrossSalary(bonus, selectedBasicSalary) {
        const res_bruto = bonus + selectedBasicSalary;
        if (res_bruto >= 0) {
          return res_bruto;
        } else {
          return 0;
        }
      }

      _reset() {
        window.location.reload();
      }
    }

    window.customElements.define(bonusApp.is, bonusApp);
  </script>
</dom-module>